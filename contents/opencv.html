<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OpenCV: Basics &mdash; Image processing 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/css/lense-training.css?v=a3237747" />
      <link rel="stylesheet" type="text/css" href="../_static/css/links.css?v=7a4609b2" />
      <link rel="stylesheet" type="text/css" href="https://iogs-lense.github.io/lense.tech/assets/css/fontawesome/css/all.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=2709fde1"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Blur filtering with OpenCV" href="opencv_blur.html" />
    <link rel="prev" title="First transforms" href="images_transforms.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Image processing
              <img src="../_static/logo-training_git.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Images</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="images.html">     Digital Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">     Python and images</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">     OpenCV basic operations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#install-opencv">Install opencv</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#install-for-python">Install for Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-for-c">Install for C++</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#using-python">Using Python</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#import-opencv">Import opencv</a></li>
<li class="toctree-l3"><a class="reference internal" href="#open-an-image">Open an image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#display-an-image">Display an image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#save-an-image">Save an image</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#images-as-arrays">Images as arrays</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#access-to-a-part-of-an-image">Access to a part of an image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#convert-an-image-to-grayscale-format">Convert an image to grayscale format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#binarize-an-image">Binarize an image</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Basic transforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="opencv_blur.html">     Blur filter</a></li>
<li class="toctree-l1"><a class="reference internal" href="opencv_erod_dila.html">     Erosion, dilation</a></li>
<li class="toctree-l1"><a class="reference internal" href="opencv_open_close.html">     Opening, closing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Image processing</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">OpenCV: Basics</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/contents/opencv.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="opencv-basics">
<h1>OpenCV: Basics<a class="headerlink" href="#opencv-basics" title="Link to this heading"></a></h1>
<p>A powerful set of tools for image processing</p>
<ul class="simple">
<li><p>Install OpenCV on Windows for MingW64  - could be long…</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">07_opencv_first_try</span></code> : introducing OpenCV, open and display an image. /!OpenCV create a 3 channels image (R,G,B) even if the initial image is in grayscale.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">08_opencv_mean_filters</span></code> : convolution with a specific kernel.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">09_opencv_erode_opening</span></code> : erosion, dilatation, opening and closing on image.</p></li>
</ul>
<section id="install-opencv">
<h2>Install opencv<a class="headerlink" href="#install-opencv" title="Link to this heading"></a></h2>
<section id="install-for-python">
<h3>Install for Python<a class="headerlink" href="#install-for-python" title="Link to this heading"></a></h3>
<p>To install OpenCV for Python, you can use the package manager <code class="code docutils literal notranslate"><span class="pre">pip</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>opencv-python
</pre></div>
</div>
</section>
<section id="install-for-c">
<h3>Install for C++<a class="headerlink" href="#install-for-c" title="Link to this heading"></a></h3>
<p>Soon…</p>
</section>
</section>
<section id="using-python">
<h2>Using Python<a class="headerlink" href="#using-python" title="Link to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The code of this example is in the <code class="file docutils literal notranslate"><span class="pre">\progs\Python\07_opencv_first_try\07_opencv_test.py</span></code> file of the repository.</p>
<p>Examples of images are stored in <code class="file docutils literal notranslate"><span class="pre">\_data\</span></code> directory of the repository.</p>
</div>
<section id="import-opencv">
<h3>Import opencv<a class="headerlink" href="#import-opencv" title="Link to this heading"></a></h3>
<p>To import OpenCV in your Python scripts, you can use this instruction:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cv2</span>
</pre></div>
</div>
<p>To display the version of OpenCV that is installed (and verify its good installation…), you can use this instruction:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="open-an-image">
<h3>Open an image<a class="headerlink" href="#open-an-image" title="Link to this heading"></a></h3>
<p>The <code class="code docutils literal notranslate"><span class="pre">imread</span></code> function of OpenCV reads an image from a specified file path. A lot of different formats can be opened (JPG, PNG…).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">image</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;path/to/your/image.jpg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Replace ‘path/to/your/image.jpg’ with the actual path to your image file.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s2">&quot;../../_data/robot.pgm&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The data from the file are stored in a <code class="code docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> object, as showed by the next instruction:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">image</span><span class="p">))</span>
<span class="go">&lt;class &#39;numpy.ndarray&#39;&gt;</span>
</pre></div>
</div>
<p>You can also access to the size of the image (or shape) by the next instruction:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(382, 600, 3)</span>
</pre></div>
</div>
<p>The firt value is the height, the second one the width and the third one is the number of channels.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Even if the image is stored in a grayscale format, the <code class="code docutils literal notranslate"><span class="pre">imread</span></code> function of OpenCV create a 3 channels image (R, G, B). In the case of a grayscale format, the 3 channels are exactly the same.</p>
</div>
</section>
<section id="display-an-image">
<h3>Display an image<a class="headerlink" href="#display-an-image" title="Link to this heading"></a></h3>
<p>OpenCV uses different graphic backends to display images, depending on the operating system and how OpenCV was compiled. The most common graphic packages or libraries that OpenCV relies on to display images using the cv2.imshow() function include: GTK (GIMP Toolkit), Qt, Win32 API, Cocoa (on macOS).</p>
<p>To display an image, you can use the <code class="code docutils literal notranslate"><span class="pre">imshow</span></code> function of OpenCV as described below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Image Window&#39;</span><span class="p">,</span> <span class="n">image</span><span class="p">)</span>
</pre></div>
</div>
<p>The first parameter is the name of the window that will display the image. The second parameter is the <code class="code docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> containing the image.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">imshow</span></code> function doesn’t pause or block the execution of your script. To keep the window opened, a blocking function is required.</p>
</div>
<p>To maintain the display of the image, you can use the <code class="code docutils literal notranslate"><span class="pre">waitKey</span></code> function of OpenCV as mentionned below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># 0 means wait indefinitely</span>
</pre></div>
</div>
<p>To close the window, you need to click on the top-right cross of the window, or press any key of the keyboard.</p>
<p>At the end of your script, to be sure that each OpenCV window is closed, you can use this instruction:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cv2</span><span class="o">.</span><span class="n">destroyAllWindows</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="save-an-image">
<h3>Save an image<a class="headerlink" href="#save-an-image" title="Link to this heading"></a></h3>
<p>It is also possible to save a <code class="code docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> object (containing data of an image) in a specific file with the <code class="code docutils literal notranslate"><span class="pre">imwrite</span></code> function of OpenCV.</p>
<p>The next code, for example, permits to generate a random image (with Numpy random function) and to store it into a specific file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Generate a random image</span>
<span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">channels</span> <span class="o">=</span> <span class="mi">256</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">3</span>
<span class="c1"># Generate random pixel values in the range [0, 255] for an RGB image</span>
<span class="n">random_image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">256</span><span class="p">,</span> <span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">channels</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>

<span class="c1"># Save the image using OpenCV</span>
<span class="n">output_filename</span> <span class="o">=</span> <span class="s1">&#39;random_image.png&#39;</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">output_filename</span><span class="p">,</span> <span class="n">random_image</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="code docutils literal notranslate"><span class="pre">imwrite</span></code> function needs two parameters: the path to the file to save the data and the <code class="code docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> object containing the data.</p>
</section>
</section>
<section id="images-as-arrays">
<h2>Images as arrays<a class="headerlink" href="#images-as-arrays" title="Link to this heading"></a></h2>
<p>As mentionned in the <a class="reference internal" href="images_digital.html#digital-image"><span class="std std-ref">What is an image ?</span></a> section, a digital raster image is a 2- or 3-D array, depending on the color space used and how the pixel information is stored. One of the most efficient method to store data from a digital image is to use <code class="code docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>. OpenCV is based on this principle (as we could see in the previous part).</p>
<section id="access-to-a-part-of-an-image">
<h3>Access to a part of an image<a class="headerlink" href="#access-to-a-part-of-an-image" title="Link to this heading"></a></h3>
<p>It is possible to access to a part of an image by using the properties of <code class="code docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>. This process is called: <strong>cropping an image</strong>. This means extracting a rectangular portion from the original image.</p>
<p>To extract a part of an image from a first point of coordinates (x1, y1) to a second point of coordinates (x2, y2), you can follow this instruction:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">image_crop</span> <span class="o">=</span> <span class="n">image</span><span class="p">[</span><span class="n">y1</span><span class="p">:</span><span class="n">y2</span><span class="p">,</span><span class="n">x1</span><span class="p">:</span><span class="n">x2</span><span class="p">,:]</span>
</pre></div>
</div>
<p>To obtain the shape of the new cropped image, you can use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">image_crop</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../_images/images_crop_numpy.png"><img alt="../_images/images_crop_numpy.png" src="../_images/images_crop_numpy.png" style="width: 881.6px; height: 429.6px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 7 </span><span class="caption-text">Example of image cropping: on the left the original image, on the right the cropped image around the robot wheel.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>For this example, we used the following code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">image</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s2">&quot;../../_data/robot.pgm&quot;</span><span class="p">)</span>
    <span class="n">image_crop</span> <span class="o">=</span> <span class="n">image</span><span class="p">[</span><span class="mi">200</span><span class="p">:</span><span class="mi">350</span><span class="p">,</span><span class="mi">300</span><span class="p">:</span><span class="mi">500</span><span class="p">,:]</span>
</pre></div>
</div>
</section>
<section id="convert-an-image-to-grayscale-format">
<h3>Convert an image to grayscale format<a class="headerlink" href="#convert-an-image-to-grayscale-format" title="Link to this heading"></a></h3>
<p>Converting an image to grayscale is a common and useful step in image processing and computer vision to <strong>simplify computation</strong>. Grayscale images have only one channel (intensity), instead of three (RGB) in color images. Operations such as filtering, edge detection, and thresholding can be performed more quickly on grayscale images due to the reduced amount of data.</p>
<p>To convert an image to grayscale using OpenCV in Python, you can use the <code class="code docutils literal notranslate"><span class="pre">cvtColor</span></code> function. This function is designed to convert images between different color spaces, including converting a color image to grayscale:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">grayscale_image</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
</pre></div>
</div>
<p>If you check the shape of the resulting image, it has only one channel.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">grayscale_image</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(382, 600)</span>
</pre></div>
</div>
<p>We can compare the execution time of the blur process applied on the original RGB picture and on its grayscaled version by using this code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">timeit</span>
<span class="n">kernel_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
<span class="c1"># Blur on a grayscale image</span>
<span class="k">def</span> <span class="nf">grayscale_process</span><span class="p">():</span>
    <span class="n">blurred_image15g</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">GaussianBlur</span><span class="p">(</span><span class="n">grayscale_image</span><span class="p">,</span> <span class="n">kernel_size</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="c1"># Blur on a RGB image</span>
<span class="k">def</span> <span class="nf">rgb_process</span><span class="p">():</span>
    <span class="n">blurred_image15g</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">GaussianBlur</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">kernel_size</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># Measure execution times</span>
<span class="n">time_gray</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="n">grayscale_process</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">time_rgb</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="n">rgb_process</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Execution time for Grayscale: </span><span class="si">{</span><span class="n">time_gray</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">10</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Execution time for RGB: </span><span class="si">{</span><span class="n">time_rgb</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">10</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>On a specific computer, we obtained these results:</p>
<p>Execution time for Grayscale: 0.000267 seconds</p>
<p>Execution time for RGB: 0.000757 seconds</p>
<p>The RGB process is around 3 times slower than the grayscale process.</p>
</section>
<section id="binarize-an-image">
<h3>Binarize an image<a class="headerlink" href="#binarize-an-image" title="Link to this heading"></a></h3>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="images_transforms.html" class="btn btn-neutral float-left" title="First transforms" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="opencv_blur.html" class="btn btn-neutral float-right" title="Blur filtering with OpenCV" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Julien Villemejane.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>